---
title: 数组中的逆序对
categories: leetcode
tags:
	- 排序
---

# 数组中的逆序对

## 描述

`逆序`即前面的元素大于后面的元素

**求给定数组中逆序对的个数**，注意，可以是不连续的

## 思路

归并排序在合并的过程中，利用两个指针，依次比较得到较小值，插入到数组中

这一过程正好比较了所有逆序对

## 代码

如果不熟悉归并排序，建议先了解下归并排序。

```Java
class Solution {
    public int reversePairs(int[] nums) {
        int[] temp = new int[nums.length];
        int[] ans = new int[1];
        mergeSort(nums, 0, nums.length - 1, temp, ans);
       
        return ans[0];
    }
    public void mergeSort(int[] nums, int left, int right, int[] temp, int[] ans) {
        if (left >= right) return;
        int mid = (left + right) >>> 1;
        mergeSort(nums, left, mid, temp, ans);
        mergeSort(nums, mid + 1, right, temp, ans);

        merge(nums, left, right, mid, temp, ans);
    }
    public void merge(int[] nums, int left, int right, int mid, int[] temp, int[] ans) {
        System.arraycopy(nums, left, temp, left, right - left + 1);
        int i = left;
        int j = mid + 1;
        for (int k = left; k <= right; ++ k) {
            if (i == mid + 1) {
                nums[k] = temp[j];
                j ++;
            } else if (j == right + 1 || temp[i] <= temp[j]) {
                ans[0] += j - mid - 1;
                nums[k] = temp[i];
                i ++;
            } else {
                // temp[i] > temp[j]
                nums[k] = temp[j];
                j ++;
            }
        }
    }
}
```

