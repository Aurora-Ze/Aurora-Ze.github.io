---
title: 有限状态机
categories: 数据结构与算法
---

## 有限状态机

#### 1.概念

> **有限状态机**（Finite-state machine，FSM），简称状态机，是表示**有限个状态**以及在这些状态之间的**转移**和动作等行为的数学模型。

#### 2.适用范围

在解决比较繁琐，容易思维混乱的问题时，可以使用有限状态机模型，限定该问题的范围和各种情形，并画出状态转移图或列出表格，以便厘清细节。

#### 3.示例

链接直达：[字符串转整数（atoi）](https://leetcode-cn.com/problems/string-to-integer-atoi/)

- 题目描述

请你来实现一个 `myAtoi(string s)` 函数，使其能将字符串转换成一个 32 位有符号整数（类似 C/C++ 中的 `atoi` 函数）。

- 状态机表格

| 状态\条件  |  ‘ ’  |  +/-   |   number   | other |
| :--------: | :---: | :----: | :--------: | :---: |
|   start    | start | signed | get_number |  end  |
|   signed   |  end  |  end   | get_number |  end  |
| get_number |  end  |  end   | get_number |  end  |
|    end     |  end  |  end   |    end     |  end  |



- 题解代码

```Java
class Solution {
    public int myAtoi(String s) {
        FSMTable fsm = new FSMTable();
        for (int i = 0; i < s.length(); i ++) {
            fsm.get(s.charAt(i));
        }
        return (int)(fsm.sign * fsm.ans);
    }
    class FSMTable {
        int sign = 1;           //符号,1 or -1
        long ans = 0;           //结果
        String state = "start"; //记录当前状态,从start状态开始
        HashMap<String, String[]> table = new HashMap<>();

        public FSMTable() {
            //构建状态表
            table.put("start", new String[] {"start", "signed", "get_number", "end"});
            table.put("signed", new String[] {"end", "end", "get_number", "end"});
            table.put("get_number", new String[] {"end", "end", "get_number", "end"});
            table.put("end", new String[] {"end", "end", "end", "end"});
        }

        //获取字符,进行状态转移
        void get(char c) {
            state = table.get(state)[judge(c)];
            if ("get_number".equals(state)) {
                ans = ans * 10 + c - '0'; // c - '0' 即为字符 c 代表的数字
                ans = sign == 1 ? Math.min((long)Integer.MAX_VALUE, ans) : Math.min(-(long)Integer.MIN_VALUE, ans);
            } else if ("signed".equals(state)) {
                sign = c == '+' ? 1 : -1;
            }
        }
        //判断字符，返回状态
        int judge(char c){
            if (c == ' ') return 0;
            else if (c == '+' || c == '-') return 1;
            else if (Character.isDigit(c)) return 2;
            return 3;
        }
    }
}
```

