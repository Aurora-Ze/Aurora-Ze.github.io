---
title: 操作系统—内存管理
categories: 操作系统
---

# 一、基础知识

## 1.1程序的运行

主要有三步，**编译**、**链接**和**装入**。

- **编译**，源码编译成若干个目标模块
- **链接**，多个目标模块与所需库函数链接，形成完整模块
- **装入**，把完整模块装入到内存中

## 1.2链接方式

### 1.2.1静态链接

执行前链接库函数

### 1.2.2装入时动态链接

模块放入内存时，链接上目标库函数

### 1.2.3运行时动态链接

执行时需要某个模块时，才进行链接

## 1.3装入方式

装入过程中，要把模块放入到内存中运行，可是该放在内存的哪个位置呢？

因此出现了3种不同的装入方式，**绝对装入**、**静态重定位**和**动态重定位**。

### 1.3.1绝对装入

编译时程序就已经知道了它的物理（绝对）地址，所以装入时直接放在相应位置即可。

只适用于单道程序环境

### 1.3.2静态重定位

由装入程序把逻辑地址转变成物理地址

**特点：装入时必须分配所需的全部内存空间**

早期多道批处理系统使用这种方式。

### 1.3.3动态重定位

装入时还是使用的逻辑地址，等到指令真正运行时，才会把逻辑地址转换成物理地址

是通过一个`重定位寄存器`存储模块的起始位置来实现的。

## 1.4编址方式

内存有两种编址方式，分别是**按字节编址**和**按字编址**

- **按字节编址**

  从地址0开始，每个存储单元表示1字节

- **按字编址**

  `字`指的是处理器的字长，例如32位计算机，字长就是32位，转化成字节就是4字节

  所以每个存储单元就是4字节

# 二、内存管理

操作系统管理内存，主要做了几件事

1. 内存空间的分配与回收
2. 内存空间的扩充
3. 地址转换
4. 内存保护

下面我们打乱顺序，从最简单的开始将。

# 三、内存保护

内存保护指一个进程应该只能访问自己空间的数据

两种方法：

- 一是设置上限、下限寄存器
- 二是采用重定位寄存器

# 四、内存空间分配与回收

内存分配可以采用连续分配，也可以采用非连续分配的方式。

下面这张图介绍了连续分配内存的相关知识。

![连续分配管理](https://raw.githubusercontent.com/Aurora-Ze/pictures/master/img/20210505160506.png)

