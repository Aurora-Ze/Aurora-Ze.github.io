---
title: 加密算法
categories: 计算机网络
---

## 1. 摘要算法

对**明文**进行hash，生成一段固定长度的密文

有以下几个**特点**：

1. 相同的明文，经过相同的摘要算法，得到的密文一定是一样的
2. 摘要算法要尽量**避免碰撞**
3. 明文变成密文的过程是**不可逆**的

常见的摘要算法有**MD5、SHA**

## 2. 对称加密

存在**一个密钥**

> 明文通过密钥加密，变成密文

> 密文通过密钥解密，得到明文

如果要保证数据传输的安全性，就得考虑怎样安全的把密钥告知对方

否则一旦密钥泄露，数据就会变得透明

## 3. 非对称加密

> 存在**一对密钥**，公钥和私钥
>
> 一个来加密，另一个来解密，才能获得原文。

HTTPS 通信**基础版**：混合加密机制

服务器 S 有一对公钥和私钥，客户端 C 有一个密钥

1. `S` 把公钥发给 `C`

2. `C` 获得公钥后，用公钥加密它自己的密钥，发给 `S`
3. `S` 收到密文，用私钥解密，得到 `C` 的密钥

然后双方就可以用对称加密的方式进行通信。

**但是......**

这样的机制还是会有安全问题

比如客户端判断不出它收到的公钥是服务器发的，还是被**中间人篡改**了的

如果公钥是被中间人篡改过的，那么它就可以**伪装**成服务器，与客户端进行通信

而服务器和客户端都**无法感觉**到这件事。

## 4. 数字签名

基于以上**中间人**的问题，我们又提出了数字签名算法。

它类似于写在纸上的物理签名

数字签名通常是用私钥生成签名，用公钥验证签名

1. 发送方利用摘要算法（通常是hash），得到报文摘要，再对其用私钥加密，得到数字签名
2. 然后把数字签名和报文一起发送给接收方
3. 接收方同样对报文进行相同的算法，得到报文摘要
4. 然后用公钥解密数字签名
5. 比较3、4得到的结果是否一样

就能够判断是否是发送方发过来的

## MD5加盐

**加密过程：**

场景：首次向数据库存密码时

过程：

1. 在本地生成一串随机数（称为`盐`），并与`password`相加

2. 根据相加的字符串得到`MD5加密`后的密文

3. 把`盐`按一定规则插入到密文中，然后存入数据库

**解密过程：**

场景：用户输入密码尝试登录

过程：

1. 从数据库中读取用户名所对应的`密码密文`
2. 按当时插入的规则取出`盐`
3. 用户此次输入的`password`加上`盐`，然后进行`MD5加密`得到新的密文
4. 新密文与数据库存的密文进行对比即可判断密码是否一致